<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<TITLE>Autodesk DWF Core Library</TITLE>
</HEAD>
<BODY>
<table border="0" cellpadding="0" cellspacing="0" width="100%" height="140">
	<tr>
		<td background="header.png">&nbsp;</td>
	</tr>
</table>
<!--
	<div class="headingImgcontainer"><img class="headingImg" src="header.png" alt="Autodesk DWF Core Library" title="Autodesk DWF Core Library" border="0" hspace="0" vspace="0"></div>
-->
</BODY>
</HTML>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_D_3A_2FStage_2FComponents76_5FC052_5Fstage_2Fdevelop_2Fglobal_2Fsrc_2F.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_D_3A_2FStage_2FComponents76_5FC052_5Fstage_2Fdevelop_2Fglobal_2Fsrc_2Fdwf_2F.html">dwf</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_D_3A_2FStage_2FComponents76_5FC052_5Fstage_2Fdevelop_2Fglobal_2Fsrc_2Fdwf_2Fw3dtk_2F.html">w3dtk</a></div>
<h1>BStreamFileToolkit.h</h1><a href="_b_stream_file_toolkit_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (c) 2000 by Tech Soft 3D, LLC.</span>
<a name="l00003"></a>00003 <span class="comment">// The information contained herein is confidential and proprietary to</span>
<a name="l00004"></a>00004 <span class="comment">// Tech Soft 3D, LLC., and considered a trade secret as defined under</span>
<a name="l00005"></a>00005 <span class="comment">// civil and criminal statutes.  Tech Soft 3D shall pursue its civil</span>
<a name="l00006"></a>00006 <span class="comment">// and criminal remedies in the event of unauthorized use or misappropriation</span>
<a name="l00007"></a>00007 <span class="comment">// of its trade secrets.  Use of this information by anyone other than</span>
<a name="l00008"></a>00008 <span class="comment">// authorized employees of Tech Soft 3D, LLC. is granted only under a</span>
<a name="l00009"></a>00009 <span class="comment">// written non-disclosure agreement, expressly prescribing the scope and</span>
<a name="l00010"></a>00010 <span class="comment">// manner of such use.</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">//  Copyright (c) 1996-2006 by Autodesk, Inc.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">//  By using this code, you are agreeing to the terms and conditions of</span>
<a name="l00017"></a>00017 <span class="comment">//  the License Agreement included in the documentation for this code.</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment">//  AUTODESK MAKES NO WARRANTIES, EXPRESS OR IMPLIED,</span>
<a name="l00020"></a>00020 <span class="comment">//  AS TO THE CORRECTNESS OF THIS CODE OR ANY DERIVATIVE</span>
<a name="l00021"></a>00021 <span class="comment">//  WORKS WHICH INCORPORATE IT.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">//  AUTODESK PROVIDES THE CODE ON AN "AS-IS" BASIS</span>
<a name="l00024"></a>00024 <span class="comment">//  AND EXPLICITLY DISCLAIMS ANY LIABILITY, INCLUDING</span>
<a name="l00025"></a>00025 <span class="comment">//  CONSEQUENTIAL AND INCIDENTAL DAMAGES FOR ERRORS,</span>
<a name="l00026"></a>00026 <span class="comment">//  OMISSIONS, AND OTHER PROBLEMS IN THE CODE.</span>
<a name="l00027"></a>00027 <span class="comment">//</span>
<a name="l00028"></a>00028 <span class="comment">//  Use, duplication, or disclosure by the U.S. Government is subject to</span>
<a name="l00029"></a>00029 <span class="comment">//  restrictions set forth in FAR 52.227-19 (Commercial Computer Software</span>
<a name="l00030"></a>00030 <span class="comment">//  Restricted Rights) and DFAR 252.227-7013(c)(1)(ii) (Rights in Technical</span>
<a name="l00031"></a>00031 <span class="comment">//  Data and Computer Software), as applicable.</span>
<a name="l00032"></a>00032 <span class="comment">//</span>
<a name="l00033"></a>00033 <span class="comment">//</span>
<a name="l00034"></a>00034 <span class="comment">// $Header: //DWF/Working_Area/Willie.Zhu/w3dtk/BStreamFileToolkit.h#1 $</span>
<a name="l00035"></a>00035 <span class="comment">//</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#ifndef BBINFILETK_TOOLKIT</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define BBINFILETK_TOOLKIT</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include "<a class="codeRef" doxygen="dwfcore.tag:../../../../docs/DWF Core/html/" href="../../../../docs/DWF Core/html/_input_stream_8h.html">dwfcore/InputStream.h</a>"</span>
<a name="l00045"></a>00045 <span class="keyword">using namespace </span>DWFCore;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#include "dwf/Toolkit.h"</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00055"></a><a class="code" href="class_b_controlled_memory_object.html">00055</a> <span class="keyword">class </span><a class="code" href="_b_stream_8h.html#90c0d31f2d6101ab512085848ec0778f">BBINFILETK_API2</a> <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00056"></a>00056     <span class="keyword">public</span>:
<a name="l00057"></a>00057         <span class="keywordtype">void</span> * operator new (size_t size);  
<a name="l00058"></a>00058         <span class="keywordtype">void</span>   operator delete (<span class="keywordtype">void</span> * p);  
<a name="l00059"></a>00059 };
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="keyword">class </span><a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a>;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="preprocessor">#ifndef DOXYGEN_SHOULD_SKIP_THIS</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="comment">/*</span>
<a name="l00067"></a>00067 <span class="comment">   Buffers data so basic handlers can deal with simple Get/Put calls of basic data types (and arrays of those types).</span>
<a name="l00068"></a>00068 <span class="comment">   Handles both reading and writing, ZLIB compressed or uncompressed.</span>
<a name="l00069"></a>00069 <span class="comment">*/</span>
<a name="l00070"></a>00070 <span class="keyword">class </span><a class="code" href="_b_stream_8h.html#90c0d31f2d6101ab512085848ec0778f">BBINFILETK_API2</a> Internal_Data_Accumulator {
<a name="l00071"></a>00071     <span class="keyword">private</span>:
<a name="l00072"></a>00072         <span class="keywordtype">char</span> *          m_pending_buffer;           <span class="comment">/*&lt; The whole burrito. */</span>
<a name="l00073"></a>00073         <span class="keywordtype">int</span>             m_pending_buffer_allocated; <span class="comment">/*&lt; How big the buffer is (so we know when to reallocate) */</span>
<a name="l00074"></a>00074         <span class="keywordtype">char</span> *          m_pending_position;         <span class="comment">/*&lt; Start of actual data to be processed.*/</span>
<a name="l00075"></a>00075         <span class="keywordtype">int</span>             m_pending_size;             <span class="comment">/*&lt; Size of actual data. */</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077         <span class="keywordtype">char</span> *          m_buffer_data;              <span class="comment">/*&lt; The buffer shown to the user (i.e. passed to GenerateBuffer or ParseBuffer) */</span>
<a name="l00078"></a>00078         <span class="keywordtype">int</span>             m_buffer_size;              <span class="comment">/*&lt; The size of the user's buffer */</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080         <span class="keywordtype">int</span>             m_failed_size;              <span class="comment">/*&lt; When a read fails because of insufficient data, how much space would have been required for success? */</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <span class="keywordtype">int</span>             m_generated;                <span class="comment">/*&lt; How much has been written into the user's buffer (after considering compression).  */</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084         <span class="keyword">struct </span>z_stream_s * m_z_stream;             <span class="comment">/*&lt; The control structure for ZLIB */</span>
<a name="l00085"></a>00085         <span class="keywordtype">bool</span>            m_compressed;               <span class="comment">/*&lt; are we in compressed mode? */</span>
<a name="l00086"></a>00086         <span class="keywordtype">bool</span>            m_writing;                  <span class="comment">/*&lt; are we compressing or decompressing? */</span>
<a name="l00087"></a>00087         <span class="keywordtype">int</span>             m_original_size;            <span class="comment">/*&lt; size of buffer originally passed in */</span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keyword">public</span>:
<a name="l00090"></a>00090         Internal_Data_Accumulator () : m_pending_buffer (0), m_pending_buffer_allocated (0),
<a name="l00091"></a>00091                                        m_pending_position (0), m_pending_size (0),
<a name="l00092"></a>00092                                        m_failed_size (0), m_generated (0),
<a name="l00093"></a>00093                                        m_z_stream (0), m_compressed (false), m_writing (false) {}
<a name="l00094"></a>00094         ~Internal_Data_Accumulator ();
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         <span class="keywordtype">void</span>        set_data (<span class="keywordtype">char</span> * <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, <span class="keywordtype">int</span> s) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a> { m_buffer_data = <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>; m_original_size = m_buffer_size = s; }
<a name="l00097"></a>00097         <span class="keywordtype">void</span>        save (<span class="keywordtype">void</span>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00098"></a>00098         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   consume (<span class="keywordtype">void</span>) alter;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   read (<span class="keywordtype">char</span> alter * <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, <span class="keywordtype">int</span> s) alter;
<a name="l00101"></a>00101         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   write (<span class="keywordtype">char</span> const * b, <span class="keywordtype">int</span> s) alter;
<a name="l00102"></a>00102         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   lookat (<span class="keywordtype">char</span> alter &amp; b) alter;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104         <span class="keywordtype">int</span>         get_original_buffer_size(){<span class="keywordflow">return</span> m_original_size; }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106         <span class="keywordtype">void</span>        restart (<span class="keywordtype">void</span>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00107"></a>00107         <span class="keywordtype">void</span>        clean (<span class="keywordtype">void</span>) alter;
<a name="l00108"></a>00108         <span class="keywordtype">int</span>         unused (<span class="keywordtype">void</span>)<span class="keyword"> const     </span>{ <span class="keywordflow">return</span> m_buffer_size; }
<a name="l00109"></a>00109         <span class="keywordtype">int</span>         generated (<span class="keywordtype">void</span>)<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> m_generated; }
<a name="l00110"></a>00110 
<a name="l00111"></a>00111         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   start_compression (<span class="keywordtype">void</span>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00112"></a>00112         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   stop_compression (<span class="keywordtype">bool</span> flush) alter;
<a name="l00113"></a>00113         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   start_decompression (<span class="keywordtype">void</span>) alter;
<a name="l00114"></a>00114         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   stop_decompression (<span class="keywordtype">bool</span> force) alter;
<a name="l00115"></a>00115         <span class="keywordtype">bool</span>        compressed (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_compressed; }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   error (<span class="keywordtype">char</span> <span class="keyword">const</span> * msg = 0) <span class="keyword">const</span>;
<a name="l00118"></a>00118 };
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">/*</span>
<a name="l00122"></a>00122 <span class="comment">    Provides index &lt;-&gt; key translation, plus storage of additional item-specific data, such as</span>
<a name="l00123"></a>00123 <span class="comment">    file offset and size and bounding volume.</span>
<a name="l00124"></a>00124 <span class="comment">*/</span>
<a name="l00125"></a>00125 <span class="keyword">struct </span>IT_Index_Key_Extra {
<a name="l00126"></a>00126     <span class="keywordtype">int</span>     m_variants[8][2];
<a name="l00127"></a>00127     <span class="keywordtype">int</span>     m_options;
<a name="l00128"></a>00128     <span class="keywordtype">float</span>   m_bounds[6];
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="keyword">class </span><a class="code" href="_b_stream_8h.html#90c0d31f2d6101ab512085848ec0778f">BBINFILETK_API2</a> Internal_Translator {
<a name="l00132"></a>00132     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_t_k___dictionary.html">TK_Dictionary</a>; <span class="comment">// note, dictionary writer tied closely to this implementation</span>
<a name="l00133"></a>00133     <span class="keyword">private</span>:
<a name="l00134"></a>00134         <span class="comment">// array -- index to key is trivial</span>
<a name="l00135"></a>00135         <span class="keywordtype">int</span>                     m_size;
<a name="l00136"></a>00136         <span class="keywordtype">int</span>                     m_used;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         <span class="keyword">struct </span>Index_Key_Pair {
<a name="l00139"></a>00139             <span class="keywordtype">int</span>                 m_index;
<a name="l00140"></a>00140             <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>              m_key;
<a name="l00141"></a>00141             IT_Index_Key_Extra *m_extra;
<a name="l00142"></a>00142         } *                     m_pairs;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         <span class="keyword">enum</span> Options {
<a name="l00145"></a>00145             Bounds_Valid    = 0x0001,
<a name="l00146"></a>00146 
<a name="l00147"></a>00147             Extended        = 0x0080    <span class="comment">// reserved</span>
<a name="l00148"></a>00148         };
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="comment">// hash of key to locate potential indices for key to index lookup</span>
<a name="l00151"></a>00151         <span class="keyword">struct </span>Hash_Block {
<a name="l00152"></a>00152             Hash_Block *    m_next;
<a name="l00153"></a>00153             <span class="keywordtype">int</span>             m_used;
<a name="l00154"></a>00154             <span class="keywordtype">int</span>             m_indices[32];
<a name="l00155"></a>00155         } *                     m_blocks[1024];
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="keyword">public</span>:
<a name="l00159"></a>00159         Internal_Translator () : m_size (0), m_used (0), m_pairs (0) { memset (m_blocks, 0, 1024*<span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *)); }
<a name="l00160"></a>00160         ~Internal_Translator ();
<a name="l00161"></a>00161 
<a name="l00162"></a>00162         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   add_pair (<span class="keywordtype">int</span> index, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00163"></a>00163         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   add_variant (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> value1, <span class="keywordtype">int</span> value2 = 0) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00164"></a>00164         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   add_bounds (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">float</span> const * bounds) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00165"></a>00165         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   index_to_key (<span class="keywordtype">int</span> index, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> alter &amp; key) const;
<a name="l00166"></a>00166         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   key_to_index (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> alter &amp; index) const;
<a name="l00167"></a>00167         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   key_variant_offset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant,
<a name="l00168"></a>00168                                         <span class="keywordtype">int</span> alter &amp; offset, <span class="keywordtype">int</span> alter &amp; length, <span class="keywordtype">int</span> alter &amp; index) const;
<a name="l00169"></a>00169         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   key_bounds (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">float</span> alter * bounds) const;
<a name="l00170"></a>00170         <span class="keywordtype">int</span>         used (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_used; }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172         <span class="keywordtype">void</span>        clean (<span class="keywordtype">void</span>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// older forms:</span>
<a name="l00175"></a>00175         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   key_variant_offset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> alter &amp; offset)<span class="keyword"> const </span>{
<a name="l00176"></a>00176                         <span class="keyword">auto</span>        <span class="keywordtype">int</span>                 length, index;
<a name="l00177"></a>00177                         <span class="keywordflow">return</span> key_variant_offset (key, variant, offset, length, index);
<a name="l00178"></a>00178                     }
<a name="l00179"></a>00179         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   key_variant_offset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a> &amp; offset, <span class="keywordtype">int</span> <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a> &amp; length)<span class="keyword"> const </span>{
<a name="l00180"></a>00180                         <span class="keyword">auto</span>        <span class="keywordtype">int</span>                 index;
<a name="l00181"></a>00181                         <span class="keywordflow">return</span> key_variant_offset (key, variant, offset, length, index);
<a name="l00182"></a>00182                     }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 };
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="keyword">class </span><a class="code" href="_b_stream_8h.html#90c0d31f2d6101ab512085848ec0778f">BBINFILETK_API2</a> Internal_Key_Record {
<a name="l00188"></a>00188     <span class="keyword">private</span>:
<a name="l00189"></a>00189         <span class="comment">// hash of key to list of recorded segments</span>
<a name="l00190"></a>00190         <span class="keyword">struct </span>Hash_Block {
<a name="l00191"></a>00191             Hash_Block *    m_next;
<a name="l00192"></a>00192             <span class="keywordtype">int</span>             m_used;
<a name="l00193"></a>00193             <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>          m_keys[32];
<a name="l00194"></a>00194         } *                     m_blocks[1024];
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keyword">public</span>:
<a name="l00198"></a>00198         Internal_Key_Record () { memset (m_blocks, 0, 1024*<span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *)); }
<a name="l00199"></a>00199         ~Internal_Key_Record ();
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   add_key (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00202"></a>00202         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   find_key (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) <span class="keyword">const</span>;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         <span class="keywordtype">void</span>        clean (<span class="keywordtype">void</span>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00205"></a>00205 };
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">// control memory on these objects, not sure who might be creating/destroying them</span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 class Internal_Segment_List : public <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00212"></a>00212     <span class="keyword">public</span>:
<a name="l00213"></a>00213         Internal_Segment_List *     m_next;
<a name="l00214"></a>00214         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                      m_key;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <span class="keyword">public</span>:
<a name="l00217"></a>00217         Internal_Segment_List (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> k) : m_next (0), m_key (k) {}
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>  key (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_key; }
<a name="l00220"></a>00220 };
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keyword">class </span>Internal_Revisit_Item : <span class="keyword">public</span> <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00223"></a>00223     <span class="keyword">public</span>:
<a name="l00224"></a>00224         Internal_Revisit_Item * m_next;
<a name="l00225"></a>00225         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                  m_key;
<a name="l00226"></a>00226         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                  m_owner;
<a name="l00227"></a>00227         <span class="keywordtype">int</span>                     m_lod;
<a name="l00228"></a>00228         <span class="keywordtype">float</span>                   m_priority;
<a name="l00229"></a>00229         <span class="keywordtype">char</span>                    m_opcode;
<a name="l00230"></a>00230 };
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="keyword">class </span>Internal_ExRef_List : <span class="keyword">public</span> <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00234"></a>00234     <span class="keyword">public</span>:
<a name="l00235"></a>00235         Internal_ExRef_List *   m_next;
<a name="l00236"></a>00236         <span class="keywordtype">char</span> *                  m_ref;
<a name="l00237"></a>00237         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                  m_context;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="keyword">public</span>:
<a name="l00240"></a>00240         Internal_ExRef_List (<span class="keywordtype">char</span> <span class="keyword">const</span> * ref, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> context);
<a name="l00241"></a>00241         ~Internal_ExRef_List ();
<a name="l00242"></a>00242 
<a name="l00243"></a>00243         <span class="keywordtype">char</span> <span class="keyword">const</span> *    Reference (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_ref; }
<a name="l00244"></a>00244         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>          Context (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_context; }
<a name="l00245"></a>00245 };
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="keyword">class </span><a class="code" href="_b_stream_8h.html#ad76fa9771ea896a1b36d283fa2b10f7">BBINFILETK_API</a> Recorded_Instance : <span class="keyword">public</span> <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00249"></a>00249     <span class="keyword">public</span>:
<a name="l00250"></a>00250         Recorded_Instance *     m_next;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                  m_key;
<a name="l00253"></a>00253         <span class="keywordtype">int</span>                     m_variant;
<a name="l00254"></a>00254         <span class="keywordtype">int</span>                     m_values[3];
<a name="l00255"></a>00255 
<a name="l00256"></a>00256         <span class="keywordtype">float</span>                   m_local_basis[16];      <span class="comment">// matrix from our basis to identity</span>
<a name="l00257"></a>00257         <span class="keywordtype">int</span>                     m_basis_indices[4];
<a name="l00258"></a>00258         <span class="keywordtype">float</span>                   m_arbitrary_point[3];
<a name="l00259"></a>00259         <span class="keywordtype">int</span>                     m_arbitrary_index;
<a name="l00260"></a>00260         <span class="keywordtype">bool</span>                    m_basis_valid;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>           m_opcode;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00265"></a>00265 <span class="preprocessor"></span>        <span class="keywordtype">int</span>                     m_times_used;
<a name="l00266"></a>00266 <span class="preprocessor">#endif</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span>
<a name="l00268"></a>00268         Recorded_Instance (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> op, <span class="keywordtype">int</span> val1, <span class="keywordtype">int</span> val2, <span class="keywordtype">int</span> val3)
<a name="l00269"></a>00269             : m_next (0), m_key (key), m_variant (variant), m_basis_valid (false), m_opcode (op) {
<a name="l00270"></a>00270             m_values[0] = val1;     m_values[1] = val2;     m_values[2] = val3;
<a name="l00271"></a>00271 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>            m_times_used = 0;
<a name="l00273"></a>00273 <span class="preprocessor">#endif</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span>        }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <span class="keywordtype">bool</span> basis_valid (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_basis_valid; }
<a name="l00277"></a>00277         <span class="keywordtype">bool</span> generate_basis (<span class="keywordtype">int</span> count, <span class="keywordtype">float</span> <span class="keyword">const</span> * points) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00278"></a>00278 };
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 <span class="keyword">class </span>Internal_Segment_Processor;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="comment">/*</span>
<a name="l00283"></a>00283 <span class="comment">    Callback which can be used for reporting progress during writing/reading.</span>
<a name="l00284"></a>00284 <span class="comment">    During writing:</span>
<a name="l00285"></a>00285 <span class="comment">        so_far is number of "objects" written, expected is the number the toolkit will likely write.</span>
<a name="l00286"></a>00286 <span class="comment">        Note: the toolkit won't know about objects in pre/post-walk handlers or extra objects due to</span>
<a name="l00287"></a>00287 <span class="comment">            overloading the default classes, so "so_far" may exceed "expected"</span>
<a name="l00288"></a>00288 <span class="comment">    During reading:</span>
<a name="l00289"></a>00289 <span class="comment">        so_far is the number of bytes processed, expected is the file size.</span>
<a name="l00290"></a>00290 <span class="comment">    user_data allows the application to pass any necessary values through.</span>
<a name="l00291"></a>00291 <span class="comment">    returns a flag which indicates whether the processing should continue.</span>
<a name="l00292"></a>00292 <span class="comment">*/</span>
<a name="l00293"></a>00293 <span class="keyword">typedef</span> bool (*TK_Progress_Callback) (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> so_far, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> expected, <span class="keywordtype">void</span> * user_data);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 #endif <span class="comment">/* DOXYGEN_SHOULD_SKIP_THIS */</span>
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00300"></a>00300 
<a name="l00333"></a><a class="code" href="class_b_stream_file_toolkit.html">00333</a> <span class="keyword">class</span> <a class="code" href="_b_stream_8h.html#90c0d31f2d6101ab512085848ec0778f">BBINFILETK_API2</a> <a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a> : <span class="keyword">public</span> <a class="code" href="class_b_controlled_memory_object.html">BControlledMemoryObject</a> {
<a name="l00334"></a><a class="code" href="class_b_stream_file_toolkit.html#5d29067a7f511c7aaa656c3ff0925dd6">00334</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a>;
<a name="l00335"></a><a class="code" href="class_b_stream_file_toolkit.html#58f152e9d6c09dee584b788a52630e98">00335</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___default.html">TK_Default</a>;
<a name="l00336"></a><a class="code" href="class_b_stream_file_toolkit.html#9bbbdadc33701b65912b4168410c800b">00336</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___comment.html">TK_Comment</a>;
<a name="l00337"></a><a class="code" href="class_b_stream_file_toolkit.html#29e3360237debd9655c460b844307b8d">00337</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___header.html">TK_Header</a>;
<a name="l00338"></a><a class="code" href="class_b_stream_file_toolkit.html#0972924d7bf05055df3d8f76d796ae2a">00338</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___compression.html">TK_Compression</a>;
<a name="l00339"></a><a class="code" href="class_b_stream_file_toolkit.html#d5e676c545b8a07e46794c9682efe9e5">00339</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___dictionary.html">TK_Dictionary</a>;
<a name="l00340"></a><a class="code" href="class_b_stream_file_toolkit.html#1fb2e1686dcd49c0d3eb71e330b88288">00340</a>     <span class="keyword">friend</span> <span class="keyword">class</span> Internal_Segment_Processor;
<a name="l00341"></a><a class="code" href="class_b_stream_file_toolkit.html#267eb35f5c7f7c30edd2770272ab8d2c">00341</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___shell.html">TK_Shell</a>;
<a name="l00342"></a>00342 
<a name="l00343"></a><a class="code" href="class_b_stream_file_toolkit.html#7e71115d86a9b2ba3421b8543175c3bd">00343</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___tag.html">TK_Tag</a>;
<a name="l00344"></a><a class="code" href="class_b_stream_file_toolkit.html#a958f8625e9554b20e6cb438643235d6">00344</a>     <span class="keyword">friend</span> <span class="keyword">class</span> <a class="code" href="class_t_k___instance.html">TK_Instance</a>;
<a name="l00345"></a>00345     <span class="keyword">protected</span>:
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 #ifndef DOXYGEN_SHOULD_SKIP_THIS
<a name="l00348"></a>00348 
<a name="l00349"></a>00349         Internal_Data_Accumulator       m_accumulator;          
<a name="l00350"></a>00350         Internal_Translator             m_translator;           
<a name="l00352"></a>00352         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> *            m_objects[256];         
<a name="l00353"></a>00353         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> *            m_default_object;       
<a name="l00354"></a>00354         <span class="keywordtype">int</span>                             m_prewalk_count;
<a name="l00355"></a>00355         <span class="keywordtype">int</span>                             m_postwalk_count;
<a name="l00356"></a>00356         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> **           m_prewalk;              
<a name="l00357"></a>00357         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> **           m_postwalk;             
<a name="l00358"></a>00358         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> *            m_current_object;       
<a name="l00359"></a>00359         Internal_Segment_List *         m_active_segments;      
<a name="l00360"></a>00360         Internal_Key_Record             m_visited_items;                
<a name="l00361"></a>00361         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>                          m_context_key;          
<a name="l00362"></a>00362         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> *                        m_last_keys;            
<a name="l00363"></a>00363         <span class="keywordtype">int</span>                             m_last_keys_used;
<a name="l00364"></a>00364         <span class="keywordtype">int</span>                             m_last_keys_allocated;
<a name="l00365"></a>00365         Internal_Revisit_Item *         m_revisit;              
<a name="l00366"></a>00366         Internal_Revisit_Item *         m_revisit_working;      
<a name="l00367"></a>00367         <span class="keywordtype">int</span>                             m_stage;                
<a name="l00368"></a>00368         <span class="keywordtype">int</span>                             m_substage;             
<a name="l00369"></a>00369         <span class="keywordtype">int</span>                             m_pass;                 
<a name="l00370"></a>00370         <span class="keywordtype">int</span>                             m_tag_count;            
<a name="l00371"></a>00371         <span class="keywordtype">int</span>                             m_position;             
<a name="l00372"></a>00372         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                    m_offset;               
<a name="l00373"></a>00373         <span class="keywordtype">int</span>                             m_unused;               
<a name="l00374"></a>00374         <span class="keywordtype">int</span>                             m_write_flags;          
<a name="l00375"></a>00375         <span class="keywordtype">int</span>                             m_read_flags;           
<a name="l00376"></a>00376         <span class="keywordtype">int</span>                             m_num_normal_bits;      
<a name="l00377"></a>00377         <span class="keywordtype">int</span>                             m_num_vertex_bits;      
<a name="l00378"></a>00378         <span class="keywordtype">int</span>                             m_num_parameter_bits;   
<a name="l00379"></a>00379         <span class="keywordtype">int</span>                             m_num_color_bits;       
<a name="l00380"></a>00380         <span class="keywordtype">int</span>                             m_num_index_bits;       
<a name="l00381"></a>00381         <span class="keywordtype">int</span>                             m_file_version;         
<a name="l00382"></a>00382         <span class="keywordtype">int</span>                             m_target_version;       
<a name="l00383"></a>00383         <span class="keywordtype">bool</span>                            m_header_comment_seen;  
<a name="l00384"></a>00384         <span class="keywordtype">char</span> *                          m_log_file;             
<a name="l00385"></a>00385         FILE *                          m_log_fp;               
<a name="l00386"></a>00386         <span class="keywordtype">bool</span>                            m_logging;              
<a name="l00387"></a>00387         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                    m_logging_options;      
<a name="l00388"></a>00388         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                    m_log_line_length;      
<a name="l00389"></a>00389         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                    m_opcode_sequence;      
<a name="l00390"></a>00390         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                    m_objects_written;      
<a name="l00391"></a>00391         TK_Progress_Callback            m_progress_callback;    
<a name="l00392"></a>00392         <span class="keywordtype">void</span> *                          m_progress_value;       
<a name="l00393"></a>00393         <span class="keywordtype">int</span>                             m_buffer_limit;         
<a name="l00394"></a>00394         <span class="keywordtype">int</span>                             m_nesting_level;        
<a name="l00395"></a>00395         <span class="keywordtype">int</span>                             m_dictionary_format;    
<a name="l00396"></a>00396         <span class="keywordtype">int</span>                             m_dictionary_options;   
<a name="l00397"></a>00397         <span class="keywordtype">int</span>                             m_dictionary_size;      
<a name="l00398"></a>00398         <span class="keywordtype">int</span>                             m_dictionary_offset;    
<a name="l00399"></a>00399         Recorded_Instance *             m_instance_hash[256];   
<a name="l00400"></a>00400         <span class="keywordtype">int</span>                             m_jpeg_quality;         
<a name="l00401"></a>00401         <span class="keywordtype">int</span> *                           m_pause_table;          
<a name="l00402"></a>00402         <span class="keywordtype">int</span>                             m_pause_table_size;     
<a name="l00403"></a>00403         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>                  m_num_pauses;           
<a name="l00404"></a>00404         <span class="keywordtype">float</span> *                         m_world_bounding;       
<a name="l00405"></a>00405         Internal_ExRef_List *           m_external_references;  
<a name="l00406"></a>00406         Internal_ExRef_List *           m_external_ref_tail;    
<a name="l00408"></a>00408         <span class="keywordtype">char</span> **                         m_file_names;           
<a name="l00409"></a>00409         <span class="keywordtype">int</span> *                           m_file_indices;         
<a name="l00410"></a>00410         <span class="keywordtype">int</span>                             m_file_count;           
<a name="l00411"></a>00411         <span class="keywordtype">int</span>                             m_files_allocated;      
<a name="l00412"></a>00412         <span class="keywordtype">char</span> *                          m_current_filename;     
<a name="l00413"></a>00413         <span class="keywordtype">int</span>                             m_index_base;           
<a name="l00414"></a>00414         <span class="keywordtype">float</span>                           m_quantization_error;   
<a name="l00416"></a>00416         <span class="keywordtype">int</span>                             m_save_write_flags;     
<a name="l00417"></a>00417         <span class="keywordtype">char</span> *                          m_filename;             
<a name="l00418"></a>00418         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *                m_wfilename;            
<a name="l00419"></a>00419                 <span class="keywordtype">bool</span>                                                    m_geometry_open;                
<a name="l00421"></a>00421                 <span class="keywordtype">bool</span>                                                    m_is_ascii;                             
<a name="l00422"></a>00422                 <span class="keywordtype">int</span>                                                             m_num_tabs;             
<a name="l00424"></a>00424                 <span class="comment">/* Internal use.</span>
<a name="l00425"></a>00425 <span class="comment">         * A quick utility to verify that an array is in fact sorted.  </span>
<a name="l00426"></a>00426 <span class="comment">         * FOR DEBUGGING ONLY</span>
<a name="l00427"></a>00427 <span class="comment">         */</span>
<a name="l00428"></a>00428         <span class="keywordtype">bool</span> issorted_revisit(Internal_Revisit_Item **array, <span class="keywordtype">int</span> count);
<a name="l00429"></a>00429 
<a name="l00434"></a>00434         <span class="keywordtype">void</span> qsort_revisit(Internal_Revisit_Item **, Internal_Revisit_Item **);
<a name="l00435"></a>00435         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a> sort_revisit();
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="keyword">virtual</span> <span class="keywordtype">void</span> read_completed () <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 #endif <span class="comment">/* DOXYGEN_SHOULD_SKIP_THIS */</span>
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     protected:
<a name="l00443"></a>00443 
<a name="l00445"></a><a class="code" href="class_b_stream_file_toolkit.html#b7bce7c4080c05ba8d5088a1bcf35b66">00445</a>         <span class="keywordtype">void</span> *                          m_file;
<a name="l00446"></a><a class="code" href="class_b_stream_file_toolkit.html#bd431b3735740e05d0a6a26027932566">00446</a>         <a class="codeRef" doxygen="dwfcore.tag:../../../../docs/DWF Core/html/" href="../../../../docs/DWF Core/html/class_d_w_f_core_1_1_d_w_f_input_stream.html">DWFInputStream</a>*                 _pInputStream;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     public:
<a name="l00449"></a>00449 
<a name="l00453"></a>00453         <a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a> (<span class="keywordtype">void</span>);
<a name="l00454"></a>00454         virtual ~<a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a> ();
<a name="l00455"></a>00455 
<a name="l00459"></a><a class="code" href="class_b_stream_file_toolkit.html#6dda632de287cd0ea8dc49849421b9e5">00459</a>                 static <span class="keywordtype">bool</span> SupportsAsciiMode(<span class="keywordtype">void</span>) {
<a name="l00460"></a>00460 <span class="preprocessor">#ifndef BSTREAM_DISABLE_ASCII</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00462"></a>00462 <span class="preprocessor">#else</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00464"></a>00464 <span class="preprocessor">#endif</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span>                }
<a name="l00466"></a>00466 
<a name="l00470"></a>00470                 <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>       SetAsciiMode(<span class="keywordtype">bool</span> whether);
<a name="l00471"></a>00471 
<a name="l00475"></a>00475                 <span class="keywordtype">bool</span>            GetAsciiMode();
<a name="l00476"></a>00476 
<a name="l00477"></a>00477                 <span class="keywordtype">void</span>           SetTabs(<span class="keywordtype">int</span>);
<a name="l00478"></a>00478                 <span class="keywordtype">int</span>            GetTabs();  
<a name="l00479"></a>00479 
<a name="l00485"></a>00485         <span class="keywordtype">int</span>   ParseVersion (<span class="keywordtype">char</span> <span class="keyword">const</span> * block) <span class="keyword">const</span>;
<a name="l00486"></a>00486 
<a name="l00522"></a>00522         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   ParseBuffer (<span class="keywordtype">char</span> <span class="keyword">const</span> * <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, <span class="keywordtype">int</span> s, <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a> mode = <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f20964d2014f509bfcdf3b54bbbf4ec05fbf9">TK_Normal</a>) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00523"></a>00523  
<a name="l00524"></a>00524 
<a name="l00530"></a>00530         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   PrepareBuffer(<span class="keywordtype">char</span> * b, <span class="keywordtype">int</span> s) alter;
<a name="l00531"></a>00531 
<a name="l00533"></a><a class="code" href="class_b_stream_file_toolkit.html#e7ac7abdbd83f3829b2e6ecc1371b28e">00533</a>         <span class="keywordtype">int</span>         CurrentBufferLength() {<span class="keywordflow">return</span> m_accumulator.get_original_buffer_size() -
<a name="l00534"></a>00534                                                   m_accumulator.unused();}
<a name="l00535"></a>00535 
<a name="l00541"></a><a class="code" href="class_b_stream_file_toolkit.html#5ec9c5105b32798cc94633714f1d0e17">00541</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    ActivateContext (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) { (void)key; }
<a name="l00542"></a>00542 
<a name="l00548"></a><a class="code" href="class_b_stream_file_toolkit.html#6c6819e6937a5b30799022f9282234e0">00548</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    DeactivateContext (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) { (void)key; }
<a name="l00549"></a>00549 
<a name="l00557"></a><a class="code" href="class_b_stream_file_toolkit.html#69fb518584f4b4e9874a8046bfeced1f">00557</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    NewFileContext (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) { (void)key; }
<a name="l00558"></a>00558 
<a name="l00564"></a><a class="code" href="class_b_stream_file_toolkit.html#f445e7c096c7e6c718e076d9ce80e2ce">00564</a>         <span class="keywordtype">int</span>             GeneratedSoFar (<span class="keywordtype">void</span>) <span class="keyword">const</span> { <span class="keywordflow">return</span> m_accumulator.generated(); }
<a name="l00565"></a>00565 
<a name="l00570"></a><a class="code" href="class_b_stream_file_toolkit.html#9f4a7d696b1315cca384cb8ecb12ee85">00570</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    ObjectsSoFar (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_objects_written; }
<a name="l00571"></a>00571 
<a name="l00578"></a>00578         <span class="keywordtype">void</span>        SetOpcodeHandler (<span class="keywordtype">int</span> which, <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> * handler) <a class="code" href="_b_stream_8h.html#5667da2ff3545d244af39297559ee21e">alter</a>;
<a name="l00579"></a>00579 
<a name="l00587"></a>00587         <span class="keywordtype">void</span>        SetPrewalkHandler (<a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> * handler) alter;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 
<a name="l00597"></a>00597         <span class="keywordtype">void</span>        SetPostwalkHandler (<a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> * handler) alter;
<a name="l00598"></a>00598 
<a name="l00600"></a><a class="code" href="class_b_stream_file_toolkit.html#9b6f885c5fdab5b9b34f838e8cb510af">00600</a>         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> *    GetOpcodeHandler (<span class="keywordtype">int</span> which)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_objects[which]; }
<a name="l00601"></a>00601 
<a name="l00607"></a>00607         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    Restart (<span class="keywordtype">void</span>) alter;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609         <span class="comment">// access to index &lt;-&gt; key tranlation</span>
<a name="l00616"></a>00616 <span class="comment"></span>        <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   IndexToKey (<span class="keywordtype">int</span> index, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> alter &amp; key) const;
<a name="l00617"></a>00617 
<a name="l00624"></a>00624         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   KeyToIndex (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> alter &amp; index) const;
<a name="l00625"></a>00625 
<a name="l00632"></a><a class="code" href="class_b_stream_file_toolkit.html#0792f0b6ff558181a5063d45931ed1ce">00632</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   AddIndexKeyPair (<span class="keywordtype">int</span> index, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter
<a name="l00633"></a>00633                                         { <span class="keywordflow">return</span> m_translator.add_pair (index, key); }
<a name="l00634"></a>00634 
<a name="l00643"></a><a class="code" href="class_b_stream_file_toolkit.html#2053781081c06ed485e7879800a24c03">00643</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   AddVariant (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> value1, <span class="keywordtype">int</span> value2 = -1) alter
<a name="l00644"></a>00644                                         { <span class="keywordflow">return</span> m_translator.add_variant (key, variant, value1, value2);   }
<a name="l00645"></a>00645 
<a name="l00652"></a><a class="code" href="class_b_stream_file_toolkit.html#317f735c13a69c78878e75da758f63fd">00652</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   AddBounds (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">float</span> <span class="keyword">const</span> * bounds) alter
<a name="l00653"></a>00653                                         { <span class="keywordflow">return</span> m_translator.add_bounds (key, bounds);                     }
<a name="l00654"></a>00654 
<a name="l00662"></a><a class="code" href="class_b_stream_file_toolkit.html#0482ed3223560a94aa8528f1866990e7">00662</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetOffset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> alter &amp; offset)<span class="keyword"> const</span>
<a name="l00663"></a>00663 <span class="keyword">                                        </span>{ <span class="keywordflow">return</span> m_translator.key_variant_offset (key, variant, offset);            }
<a name="l00664"></a>00664 
<a name="l00673"></a><a class="code" href="class_b_stream_file_toolkit.html#af70c10c859cc394aedf3afea42bbfb0">00673</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetOffset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <span class="keywordtype">int</span> alter &amp; offset, <span class="keywordtype">int</span> alter &amp; length)<span class="keyword"> const</span>
<a name="l00674"></a>00674 <span class="keyword">                                        </span>{ <span class="keywordflow">return</span> m_translator.key_variant_offset (key, variant, offset, length);    }
<a name="l00675"></a>00675 
<a name="l00685"></a>00685         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetOffset (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant,
<a name="l00686"></a>00686                                <span class="keywordtype">int</span> alter &amp; offset, <span class="keywordtype">int</span> alter &amp; length, <span class="keywordtype">char</span> <span class="keyword">const</span> * alter &amp; filename) <span class="keyword">const</span>;
<a name="l00687"></a>00687 
<a name="l00694"></a><a class="code" href="class_b_stream_file_toolkit.html#594c03d77c224beac6845247bae18700">00694</a>         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetBounds (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">float</span> alter * bounds)<span class="keyword"> const</span>
<a name="l00695"></a>00695 <span class="keyword">                                        </span>{ <span class="keywordflow">return</span> m_translator.key_bounds (key, bounds);                             }
<a name="l00696"></a>00696 
<a name="l00701"></a><a class="code" href="class_b_stream_file_toolkit.html#e7e1e0245499cfca21875a3717c23b2b">00701</a>         <span class="keywordtype">int</span>         NextTagIndex (<span class="keywordtype">void</span>) alter   { <span class="keywordflow">return</span> m_tag_count++; }
<a name="l00706"></a><a class="code" href="class_b_stream_file_toolkit.html#4449563b081f674ccd9ae8ddc1aee6e3">00706</a>         <span class="keywordtype">int</span>         PeekTagIndex (<span class="keywordtype">void</span>)<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> m_tag_count; }
<a name="l00707"></a>00707 
<a name="l00713"></a>00713         <span class="keywordtype">void</span>        SetFilename (<span class="keywordtype">char</span> <span class="keyword">const</span> * name) alter;
<a name="l00719"></a>00719         <span class="keywordtype">void</span>        SetFilename (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keyword">const</span> * name) alter;
<a name="l00720"></a>00720 
<a name="l00725"></a>00725                 <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>       Read_Stream_File (<span class="keywordtype">void</span>);
<a name="l00726"></a>00726 
<a name="l00732"></a>00732         <span class="keywordtype">void</span>            SetNewFile (<span class="keywordtype">char</span> <span class="keyword">const</span> * name) alter;
<a name="l00737"></a><a class="code" href="class_b_stream_file_toolkit.html#7bc67e16c39e49432829715e1c3c58b4">00737</a>         <span class="keywordtype">char</span> <span class="keyword">const</span> *    GetCurrentFile (<span class="keywordtype">void</span>)<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> m_current_filename; }
<a name="l00744"></a>00744         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>       SelectFile (<span class="keywordtype">char</span> <span class="keyword">const</span> * name) alter;
<a name="l00745"></a>00745 
<a name="l00753"></a>00753         <span class="keyword">virtual</span> <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   OpenFile (<span class="keywordtype">char</span> <span class="keyword">const</span> * name, <span class="keywordtype">bool</span> write = <span class="keyword">false</span>) alter;
<a name="l00761"></a>00761         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   OpenFile (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> const * name, <span class="keywordtype">bool</span> write = false) alter;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763         <span class="comment">//</span>
<a name="l00764"></a>00764         <span class="comment">// Lets the toolkit read directly from a stream rather than assuming</span>
<a name="l00765"></a>00765         <span class="comment">// a disk file will be the source of the data feed.</span>
<a name="l00766"></a>00766         <span class="comment">//</span>
<a name="l00767"></a>00767         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   OpenStream( <a class="codeRef" doxygen="dwfcore.tag:../../../../docs/DWF Core/html/" href="../../../../docs/DWF Core/html/class_d_w_f_core_1_1_d_w_f_input_stream.html">DWFInputStream</a>&amp; rReadStream ) alter;
<a name="l00768"></a>00768         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   CloseStream() alter;
<a name="l00769"></a>00769 
<a name="l00774"></a>00774         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   CloseFile (<span class="keywordtype">void</span>) alter;
<a name="l00775"></a>00775 
<a name="l00785"></a>00785         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   ReadBuffer (<span class="keywordtype">char</span> alter * buffer, <span class="keywordtype">int</span> size, <span class="keywordtype">int</span> alter &amp; amount_read) alter;
<a name="l00786"></a>00786 
<a name="l00795"></a>00795         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   WriteBuffer (<span class="keywordtype">char</span> alter * buffer, <span class="keywordtype">int</span> size) alter;
<a name="l00796"></a>00796 
<a name="l00806"></a>00806         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   PositionFile (<span class="keywordtype">int</span> offset) alter;
<a name="l00807"></a>00807 
<a name="l00816"></a>00816         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetFileSize (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp; size) alter;
<a name="l00817"></a>00817 
<a name="l00818"></a>00818 
<a name="l00830"></a>00830         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   LocateDictionary (<span class="keywordtype">void</span>) alter;
<a name="l00831"></a>00831 
<a name="l00842"></a>00842         virtual <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   LocateEntity (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant) alter;
<a name="l00843"></a>00843         
<a name="l00844"></a><a class="code" href="class_b_stream_file_toolkit.html#210eff88f32eda4ad62f662eb1aea4a8">00844</a>         <span class="keywordtype">int</span>         GetFlags (<span class="keywordtype">void</span>)<span class="keyword"> const       </span>{ <span class="keywordflow">return</span> GetWriteFlags(); }     
<a name="l00845"></a><a class="code" href="class_b_stream_file_toolkit.html#edf3226774f08f16ef73ac09b2a1394e">00845</a>         <span class="keywordtype">void</span>        SetFlags (<span class="keywordtype">int</span> flags) alter  { SetWriteFlags(flags); }       
<a name="l00849"></a><a class="code" href="class_b_stream_file_toolkit.html#e50bd939b0961de2313206b0314f511b">00849</a>         <span class="keywordtype">void</span>        SetWriteFlags (<span class="keywordtype">int</span> flags) alter     { m_write_flags = flags; } 
<a name="l00855"></a><a class="code" href="class_b_stream_file_toolkit.html#31ffc6a06840bed4707ef632163a6b87">00855</a>         <span class="keywordtype">int</span>         GetWriteFlags (<span class="keywordtype">int</span> mask = ~0)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_write_flags &amp; mask; }
<a name="l00856"></a>00856                 
<a name="l00858"></a><a class="code" href="class_b_stream_file_toolkit.html#c2a3a2233fa5433dcc389b58405360bc">00858</a>         <span class="keywordtype">void</span>        SetReadFlags (<span class="keywordtype">int</span> flags) alter      { m_read_flags = flags; }  
<a name="l00864"></a><a class="code" href="class_b_stream_file_toolkit.html#15a26d1bddde9472cd9878bb22c41cc3">00864</a>         <span class="keywordtype">int</span>         GetReadFlags (<span class="keywordtype">int</span> mask = ~0)<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> m_read_flags &amp; mask; }
<a name="l00865"></a>00865 
<a name="l00866"></a>00866 
<a name="l00867"></a><a class="code" href="class_b_stream_file_toolkit.html#814fb2e8ff4ce106f2f16805bacf09e8">00867</a>         <span class="keywordtype">int</span>         GetNumNormalBits (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_num_normal_bits; } 
<a name="l00873"></a><a class="code" href="class_b_stream_file_toolkit.html#b826a329e25bf136f5666efc179cf0fa">00873</a>         <span class="keywordtype">void</span>        SetNumNormalBits (<span class="keywordtype">int</span> numbits) alter  { m_num_normal_bits = (numbits&lt;=72) ? numbits : 72; } 
<a name="l00874"></a>00874 
<a name="l00875"></a><a class="code" href="class_b_stream_file_toolkit.html#4fb18107f91b181c29552f770d3205d6">00875</a>         <span class="keywordtype">int</span>         GetNumVertexBits (<span class="keywordtype">void</span>) <span class="keyword">const</span> { <span class="keywordflow">return</span> m_num_vertex_bits; } 
<a name="l00877"></a><a class="code" href="class_b_stream_file_toolkit.html#1395e1f5b52153e40f46010e970fc429">00877</a>         <span class="keywordtype">void</span>        SetNumVertexBits (<span class="keywordtype">int</span> numbits) alter  { m_num_vertex_bits = (numbits&lt;=72) ? numbits : 72; }      
<a name="l00878"></a><a class="code" href="class_b_stream_file_toolkit.html#50c718cc0be4afabbe5febc25eb388f6">00878</a>         <span class="keywordtype">int</span>         GetNumParameterBits (<span class="keywordtype">void</span>) <span class="keyword">const</span> { <span class="keywordflow">return</span> m_num_parameter_bits; } 
<a name="l00883"></a><a class="code" href="class_b_stream_file_toolkit.html#06aa32a03a982840004be99c55b042b4">00883</a>         <span class="keywordtype">void</span>        SetNumParameterBits (<span class="keywordtype">int</span> numbits) alter  { m_num_parameter_bits = (numbits&lt;=72) ? numbits : 72; }   
<a name="l00884"></a><a class="code" href="class_b_stream_file_toolkit.html#823603d3480db03dd6235a9a3bb7c55f">00884</a>         <span class="keywordtype">int</span>         GetNumColorBits (<span class="keywordtype">void</span>) <span class="keyword">const</span> { <span class="keywordflow">return</span> m_num_color_bits; } 
<a name="l00885"></a><a class="code" href="class_b_stream_file_toolkit.html#247c451384d4c046108cbc426eef963a">00885</a>         <span class="keywordtype">void</span>        SetNumColorBits (<span class="keywordtype">int</span> numbits) alter  { m_num_color_bits = (numbits&lt;=72) ? numbits : 72; }        
<a name="l00886"></a><a class="code" href="class_b_stream_file_toolkit.html#9d77653c8f83d008224dc80c138399f6">00886</a>         <span class="keywordtype">int</span>         GetNumIndexBits (<span class="keywordtype">void</span>) <span class="keyword">const</span> { <span class="keywordflow">return</span> m_num_index_bits; } 
<a name="l00887"></a><a class="code" href="class_b_stream_file_toolkit.html#1ef594230ecd0341a7167bcc1ba18ef2">00887</a>         <span class="keywordtype">void</span>        SetNumIndexBits (<span class="keywordtype">int</span> numbits) alter  { m_num_index_bits = (numbits&lt;=24) ? numbits : 24; }        
<a name="l00890"></a><a class="code" href="class_b_stream_file_toolkit.html#ee52c32f22de033cbc4609768ee5c20c">00890</a>         <span class="keywordtype">void</span>        SetJpegQuality (<span class="keywordtype">int</span> <a class="code" href="jpeglib_8h.html#d66636b253cb346dbb6240e30def3618">quality</a> = 75) alter     { m_jpeg_quality = <a class="code" href="jpeglib_8h.html#d66636b253cb346dbb6240e30def3618">quality</a>; }
<a name="l00892"></a><a class="code" href="class_b_stream_file_toolkit.html#98f02982701349605974c87e865a7393">00892</a>         <span class="keywordtype">int</span>         GetJpegQuality (<span class="keywordtype">void</span>)<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> m_jpeg_quality;    }
<a name="l00893"></a>00893 
<a name="l00894"></a><a class="code" href="class_b_stream_file_toolkit.html#5a5076bb8a657e5dd8a817e0c0ea9aa4">00894</a>         <span class="keywordtype">int</span>         GetVersion (<span class="keywordtype">void</span>)<span class="keyword"> const     </span>{ <span class="keywordflow">return</span> m_file_version; }  
<a name="l00896"></a><a class="code" href="class_b_stream_file_toolkit.html#e8f9ec53c389a0c6667e7fa2d0fc4eb7">00896</a>         <span class="keywordtype">void</span>        SetTargetVersion (<span class="keywordtype">int</span> <a class="code" href="jpeglib_8h.html#2af72f100c356273d46284f6fd1dfc08">version</a>) alter     { m_target_version = <a class="code" href="jpeglib_8h.html#2af72f100c356273d46284f6fd1dfc08">version</a>; }  
<a name="l00897"></a><a class="code" href="class_b_stream_file_toolkit.html#2a5d3981de72691683c602b5b36c33b1">00897</a>         <span class="keywordtype">int</span>         GetTargetVersion (<span class="keywordtype">void</span>)<span class="keyword"> const     </span>{ <span class="keywordflow">return</span> m_target_version; }  
<a name="l00899"></a>00899 
<a name="l00900"></a><a class="code" href="class_b_stream_file_toolkit.html#f067c71fc9665029ceab6a0a2a0d4ce6">00900</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    GetFileOffset (<span class="keywordtype">void</span>)<span class="keyword"> const                  </span>{ <span class="keywordflow">return</span> m_offset;      }
<a name="l00902"></a><a class="code" href="class_b_stream_file_toolkit.html#d9e917dac2558cfe7998109c18f7e691">00902</a>         <span class="keywordtype">void</span>            SetFileOffset (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offset) alter   { m_offset = offset;    }
<a name="l00904"></a><a class="code" href="class_b_stream_file_toolkit.html#c1d4f3ab0af3cc652fcb5fcd05586594">00904</a>         <span class="keywordtype">int</span>             Unused (<span class="keywordtype">void</span>)<span class="keyword"> const                     </span>{ <span class="keywordflow">return</span> m_unused; }
<a name="l00908"></a>00908         <span class="keyword">virtual</span> <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   Error(<span class="keywordtype">char</span> <span class="keyword">const</span> * msg = 0) <span class="keyword">const</span>;
<a name="l00909"></a>00909 
<a name="l00911"></a><a class="code" href="class_b_stream_file_toolkit.html#6e2ef28ae5c72a1c5bee30b3cb4cdb4b">00911</a>         <span class="keywordtype">char</span> <span class="keyword">const</span> *GetLogFile (<span class="keywordtype">void</span>)<span class="keyword"> const                     </span>{ <span class="keywordflow">return</span> m_log_file;    }
<a name="l00913"></a>00913         <span class="keywordtype">void</span>        SetLogFile (<span class="keywordtype">char</span> <span class="keyword">const</span> * filename = 0) alter;
<a name="l00914"></a>00914 
<a name="l00916"></a><a class="code" href="class_b_stream_file_toolkit.html#f37f37105db42cb60526d916be42a7d5">00916</a>         <span class="keywordtype">bool</span>        GetLogging (<span class="keywordtype">void</span>)<span class="keyword"> const                     </span>{ <span class="keywordflow">return</span> m_logging;     }
<a name="l00920"></a><a class="code" href="class_b_stream_file_toolkit.html#ddb518102253e81f733a2aa702d152f0">00920</a>         <span class="keywordtype">void</span>        SetLogging (<span class="keywordtype">bool</span> setting) alter             { m_logging = setting;  }
<a name="l00921"></a>00921 
<a name="l00923"></a><a class="code" href="class_b_stream_file_toolkit.html#8e6ef05912941c44938f26a01e4d6f39">00923</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    GetLoggingOptions (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = ~0)<span class="keyword"> const</span>
<a name="l00924"></a>00924 <span class="keyword">                                                                </span>{ <span class="keywordflow">return</span> m_logging_options &amp; mask; }
<a name="l00926"></a><a class="code" href="class_b_stream_file_toolkit.html#aa151dc8e8a22be05b599d4634b2c33c">00926</a>         <span class="keywordtype">void</span>        SetLoggingOptions (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options = ~0) alter
<a name="l00927"></a>00927                                                                 { m_logging_options = options;  }
<a name="l00928"></a>00928 
<a name="l00933"></a>00933         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   OpenLogFile (<span class="keywordtype">char</span> <span class="keyword">const</span> * filename, <span class="keywordtype">char</span> <span class="keyword">const</span> * mode) alter;
<a name="l00935"></a>00935         <span class="keywordtype">void</span>        LogEntry (<span class="keywordtype">char</span> <span class="keyword">const</span> * string) alter;
<a name="l00937"></a>00937         <span class="keywordtype">void</span>        LogEntry (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keyword">const</span> * string) alter;
<a name="l00939"></a>00939         <span class="keywordtype">void</span>        CloseLogFile (<span class="keywordtype">void</span>) alter;
<a name="l00940"></a>00940 
<a name="l00942"></a><a class="code" href="class_b_stream_file_toolkit.html#7a64f8d37268f37d6188c8eda28b431d">00942</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    NextOpcodeSequence (<span class="keywordtype">void</span>) alter                 { <span class="keywordflow">return</span> ++m_opcode_sequence;   }
<a name="l00944"></a><a class="code" href="class_b_stream_file_toolkit.html#ff10ade877c6ae5c89e3d6b5cb227bbe">00944</a>         <span class="keywordtype">void</span>            SetOpcodeSequence (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seq=0) alter    { m_opcode_sequence = seq;      }
<a name="l00945"></a>00945 
<a name="l00947"></a><a class="code" href="class_b_stream_file_toolkit.html#730dd57eb54ecf57c55ab3aaccc2af51">00947</a>         <span class="keywordtype">bool</span>        HeaderCommentSeen(<span class="keywordtype">void</span>)<span class="keyword"> const                       </span>{ <span class="keywordflow">return</span> m_header_comment_seen; }
<a name="l00948"></a>00948 
<a name="l00950"></a><a class="code" href="class_b_stream_file_toolkit.html#5d6f8b7d24363b0a8b6f51f1e4e8c492">00950</a>         TK_Progress_Callback    GetProgressCallback (<span class="keywordtype">void</span>)<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> m_progress_callback;   }
<a name="l00952"></a><a class="code" href="class_b_stream_file_toolkit.html#93d621d113b3d4801d64b9e907a38067">00952</a>         <span class="keywordtype">void</span>    SetProgressCallback (TK_Progress_Callback cb = 0) alter { m_progress_callback = cb;     }
<a name="l00953"></a>00953 
<a name="l00955"></a><a class="code" href="class_b_stream_file_toolkit.html#f760c7907247139a10cd3101072b16fa">00955</a>         <span class="keywordtype">void</span> *      GetProgressValue (<span class="keywordtype">void</span>)<span class="keyword"> const                       </span>{ <span class="keywordflow">return</span> m_progress_value;      }
<a name="l00957"></a><a class="code" href="class_b_stream_file_toolkit.html#a0a41354599189ddd5aac43ca0ac0294">00957</a>         <span class="keywordtype">void</span>        SetProgressValue (<span class="keywordtype">void</span> * value) alter               { m_progress_value = value;     }
<a name="l00958"></a>00958 
<a name="l00960"></a><a class="code" href="class_b_stream_file_toolkit.html#907e4997307c4ea97a769120556e1225">00960</a>         <span class="keywordtype">int</span>         GetBufferLimit (<span class="keywordtype">void</span>)<span class="keyword"> const                         </span>{ <span class="keywordflow">return</span> m_buffer_limit;      }
<a name="l00962"></a><a class="code" href="class_b_stream_file_toolkit.html#c9730e0a5262626d6bf72566cc096163">00962</a>         <span class="keywordtype">void</span>        SetBufferLimit (<span class="keywordtype">int</span> limit) alter    {
<a name="l00963"></a>00963                             m_buffer_limit = (0 &lt; limit &amp;&amp; limit &lt; <a class="code" href="_b_stream_8h.html#af17a7df321ce8a27021d01949cfc102">TK_DEFAULT_BUFFER_SIZE</a>) ?
<a name="l00964"></a>00964                                              limit : <a class="code" href="_b_stream_8h.html#af17a7df321ce8a27021d01949cfc102">TK_DEFAULT_BUFFER_SIZE</a>;
<a name="l00965"></a>00965                         }
<a name="l00966"></a>00966 
<a name="l00968"></a>00968         <span class="keywordtype">void</span>        SetLastKey (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter;
<a name="l00970"></a>00970         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   AppendLastKey (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter;
<a name="l00972"></a>00972         <span class="keywordtype">void</span>        ClearLastKey () alter;
<a name="l00974"></a>00974         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   GetLastKey (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> &amp;key) <span class="keyword">const</span>;
<a name="l00975"></a>00975 
<a name="l00981"></a><a class="code" href="class_b_stream_file_toolkit.html#59bedefc4ee006cc56800d9b35ce4057">00981</a>         <span class="keywordtype">void</span>        SetDictionaryFormat (<span class="keywordtype">int</span> format = 3, <span class="keywordtype">int</span> options = <a class="code" href="_b_stream_8h.html#b6518811a9e8204d616d5967f6f456a990ed54c43dc99632c56840256be7133a">TK_Dictionary_Bounding_Volumes</a>) alter
<a name="l00982"></a>00982                                         { m_dictionary_format = format; m_dictionary_options = options; }
<a name="l00987"></a><a class="code" href="class_b_stream_file_toolkit.html#5076a301fe98940f58dcbd019534f4a9">00987</a>         <span class="keywordtype">int</span>         GetDictionaryFormat (<span class="keywordtype">void</span>)<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> m_dictionary_format;     }
<a name="l00992"></a><a class="code" href="class_b_stream_file_toolkit.html#976bb1a5c2fc2ca74b1f93fb1f2a6985">00992</a>         <span class="keywordtype">int</span>         GetDictionaryOptions (<span class="keywordtype">void</span>)<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> m_dictionary_options;    }
<a name="l00997"></a><a class="code" href="class_b_stream_file_toolkit.html#29d82c638fc323dec2e159130ca93299">00997</a>         <span class="keywordtype">void</span>        SetDictionaryOffset (<span class="keywordtype">int</span> offset) alter  { m_dictionary_offset = offset; }
<a name="l01002"></a><a class="code" href="class_b_stream_file_toolkit.html#0a8c5beb928da04629148e0fe76752c0">01002</a>         <span class="keywordtype">int</span>         GetDictionaryOffset (<span class="keywordtype">void</span>)<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> m_dictionary_offset;   }
<a name="l01007"></a><a class="code" href="class_b_stream_file_toolkit.html#97cb10bc00308f9589b27b79f60f2247">01007</a>         <span class="keywordtype">void</span>        SetDictionarySize (<span class="keywordtype">int</span> size) alter      { m_dictionary_size = size;     }
<a name="l01012"></a><a class="code" href="class_b_stream_file_toolkit.html#22d8fb4e32327f5c3c2f34f40c4da2dd">01012</a>         <span class="keywordtype">int</span>         GetDictionarySize (<span class="keywordtype">void</span>)<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> m_dictionary_size;     }
<a name="l01013"></a>01013 
<a name="l01018"></a>01018         <span class="keywordtype">void</span>        RecordPause (<span class="keywordtype">int</span> offset) alter;
<a name="l01022"></a><a class="code" href="class_b_stream_file_toolkit.html#545596dd54bc8ff89a56f7d0c59fd14c">01022</a>         <span class="keywordtype">void</span>        ClearPauses (<span class="keywordtype">void</span>) alter            { m_num_pauses = 0;     }
<a name="l01027"></a><a class="code" href="class_b_stream_file_toolkit.html#43f912539cc4171ef96a784a51eb10e1">01027</a>         <span class="keywordtype">int</span>         GetPauseCount (<span class="keywordtype">void</span>)<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> m_num_pauses;  }
<a name="l01032"></a><a class="code" href="class_b_stream_file_toolkit.html#26e5ec5a2a7bcbd312de40317156939a">01032</a>         <span class="keywordtype">int</span> <span class="keyword">const</span> * GetPauseTable (<span class="keywordtype">void</span>)<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> m_pause_table; }
<a name="l01033"></a>01033 
<a name="l01035"></a><a class="code" href="class_b_stream_file_toolkit.html#c03ec004bb1cea70eb1904eb6f55af39">01035</a>         <span class="keywordtype">void</span>        SetFirstPause (<span class="keywordtype">int</span> offset) alter    { <span class="keywordflow">if</span> (GetPauseCount() == 0) RecordPause (offset);
<a name="l01036"></a>01036                                                           <span class="keywordflow">else</span> m_pause_table[0] = offset;                   }
<a name="l01038"></a><a class="code" href="class_b_stream_file_toolkit.html#61083ed1c42f90dbd5212745b83f4a34">01038</a>         <span class="keywordtype">int</span>         GetFirstPause (<span class="keywordtype">void</span>)<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> (m_num_pauses &gt; 0) ? m_pause_table[0] : 0; }
<a name="l01039"></a>01039 
<a name="l01043"></a><a class="code" href="class_b_stream_file_toolkit.html#ab0256d8adb84fad2d17ec737bf3fb90">01043</a>         <span class="keywordtype">int</span>         GetPosition (<span class="keywordtype">void</span>)<span class="keyword"> const            </span>{ <span class="keywordflow">return</span> m_position;        }
<a name="l01044"></a>01044 
<a name="l01049"></a>01049         <span class="keywordtype">void</span>        SetWorldBounding( <span class="keywordtype">float</span> <span class="keyword">const</span> *bbox );
<a name="l01050"></a>01050 
<a name="l01056"></a>01056         <span class="keywordtype">void</span>        SetWorldBoundingBySphere( <span class="keywordtype">float</span> <span class="keyword">const</span> *pt, <span class="keywordtype">float</span> radius );
<a name="l01057"></a>01057 
<a name="l01059"></a><a class="code" href="class_b_stream_file_toolkit.html#61b78f033c5fd2bad3a9fcc42ed3b7f1">01059</a>         <span class="keywordtype">float</span> <span class="keyword">const</span> * GetWorldBounding()<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> m_world_bounding; }
<a name="l01060"></a>01060 
<a name="l01061"></a>01061 
<a name="l01066"></a>01066         <span class="keywordtype">void</span>        AddExternalReference (<span class="keywordtype">char</span> <span class="keyword">const</span> * ref, <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> context) alter;
<a name="l01070"></a>01070         <span class="keywordtype">bool</span>        NextExternalReference (<span class="keywordtype">void</span>) alter;
<a name="l01074"></a><a class="code" href="class_b_stream_file_toolkit.html#6305d97a5aee21edf860f903b68bda58">01074</a>         <span class="keywordtype">char</span> const *GetExternalReference (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l01075"></a>01075                             <span class="keywordflow">return</span>  (m_external_references != 0) ? m_external_references-&gt;m_ref : 0;
<a name="l01076"></a>01076                         }
<a name="l01080"></a><a class="code" href="class_b_stream_file_toolkit.html#af40c8c21ab7b510e6da1ef411110543">01080</a>         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      GetExternalReferenceContext (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
<a name="l01081"></a>01081                             <span class="keywordflow">return</span>  (m_external_references != 0) ? m_external_references-&gt;m_context : 0;
<a name="l01082"></a>01082                         }
<a name="l01083"></a>01083 
<a name="l01087"></a>01087         <span class="keywordtype">void</span>        AddSegment (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter;
<a name="l01091"></a>01091         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      RemoveSegment (<span class="keywordtype">void</span>) alter;
<a name="l01095"></a><a class="code" href="class_b_stream_file_toolkit.html#ae212fef0e461ac21aeb4af7aa6e3d7f">01095</a>         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      CurrentSegment (<span class="keywordtype">void</span>) alter { <span class="keywordflow">return</span> (m_active_segments != 0) ? m_active_segments-&gt;key() : -1; }
<a name="l01097"></a><a class="code" href="class_b_stream_file_toolkit.html#c67eaac8f27b4c06418a0019a5a7413d">01097</a>         <span class="keywordtype">void</span> ResetQuantizationError() { m_quantization_error = 0; }
<a name="l01101"></a><a class="code" href="class_b_stream_file_toolkit.html#9e9aca78e91b98ed9b7f493324acdec3">01101</a>         <span class="keywordtype">void</span> ReportQuantizationError( <span class="keywordtype">float</span> error ) { <span class="keywordflow">if</span> (error &gt; m_quantization_error) m_quantization_error = error; };
<a name="l01105"></a>01105         <span class="keywordtype">void</span> ReportQuantizationError( <span class="keywordtype">int</span> bits_per_sample, <span class="keywordtype">float</span> <span class="keyword">const</span> *bounding, <span class="keywordtype">int</span> num_dimensions = 3 );
<a name="l01109"></a><a class="code" href="class_b_stream_file_toolkit.html#af788b2e5a5aabafb8596b9787b20643">01109</a>         <span class="keywordtype">float</span> GetQuantizationError()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_quantization_error; }
<a name="l01110"></a>01110 
<a name="l01114"></a><a class="code" href="class_b_stream_file_toolkit.html#c0c838d33e5b0b6d40e29019cbcebb15">01114</a>                 <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>       OpenGeometry (<span class="keywordtype">void</span>) alter       {
<a name="l01115"></a>01115                                                 <span class="keywordflow">if</span> (m_geometry_open)
<a name="l01116"></a>01116                                                         <span class="keywordflow">return</span> Error (<span class="stringliteral">"recursive geometry open"</span>);
<a name="l01117"></a>01117                                                 m_geometry_open = <span class="keyword">true</span>;
<a name="l01118"></a>01118                                                 <span class="keywordflow">return</span> <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f20964d2014f509bfcdf3b54bbbf4ec05fbf9">TK_Normal</a>;
<a name="l01119"></a>01119                                         }
<a name="l01123"></a><a class="code" href="class_b_stream_file_toolkit.html#e9851ff856b22f9d633f36047dd6c831">01123</a>                 <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>       CloseGeometry (<span class="keywordtype">void</span>) alter      {
<a name="l01124"></a>01124                                                 <span class="keywordflow">if</span> (!m_geometry_open)
<a name="l01125"></a>01125                                                         <span class="keywordflow">return</span> Error (<span class="stringliteral">"no geometry open"</span>);
<a name="l01126"></a>01126                                                 m_geometry_open = <span class="keyword">false</span>;
<a name="l01127"></a>01127                                                 <span class="keywordflow">return</span> <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f20964d2014f509bfcdf3b54bbbf4ec05fbf9">TK_Normal</a>;
<a name="l01128"></a>01128                                         }
<a name="l01129"></a>01129 
<a name="l01133"></a><a class="code" href="class_b_stream_file_toolkit.html#ab9b3fa5c6f995539bd15f1a32125942">01133</a>                 <span class="keywordtype">bool</span>            GeometryIsOpen (<span class="keywordtype">void</span>)<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> m_geometry_open;       }
<a name="l01134"></a>01134 
<a name="l01135"></a>01135 
<a name="l01136"></a>01136     <span class="keyword">protected</span>:
<a name="l01137"></a>01137 
<a name="l01138"></a>01138 <span class="preprocessor">#ifndef DOXYGEN_SHOULD_SKIP_THIS</span>
<a name="l01139"></a>01139 <span class="preprocessor"></span>
<a name="l01140"></a>01140         <span class="comment">// normal data access for objects</span>
<a name="l01141"></a>01141         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   read (<span class="keywordtype">char</span> alter * <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, <span class="keywordtype">int</span> n) alter      { <span class="keywordflow">return</span> m_accumulator.read (<a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, n); }
<a name="l01142"></a>01142         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   write (<span class="keywordtype">char</span> <span class="keyword">const</span> * <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, <span class="keywordtype">int</span> n) alter     { <span class="keywordflow">return</span> m_accumulator.write (<a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>, n); }
<a name="l01143"></a>01143         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   lookat (<span class="keywordtype">char</span> alter &amp; <a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>) alter           { <span class="keywordflow">return</span> m_accumulator.lookat (<a class="code" href="jpegint_8h.html#92eb5ffee6ae2fec3ad71c777531578f">b</a>); }
<a name="l01144"></a>01144 
<a name="l01145"></a>01145         <span class="comment">// used by segment handlers to make sure we know which segment should be "open"</span>
<a name="l01146"></a>01146         <span class="keywordtype">void</span>        add_segment (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter { AddSegment (key); }
<a name="l01147"></a>01147         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      remove_segment (<span class="keywordtype">void</span>) alter { <span class="keywordflow">return</span> RemoveSegment(); }
<a name="l01148"></a>01148 
<a name="l01149"></a>01149         <span class="comment">// used by renumber key, maybe by lookup functions (to be implemented...)</span>
<a name="l01151"></a>01151 <span class="comment"></span>        <span class="keywordtype">void</span>        set_last_key (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter { SetLastKey( key ); } 
<a name="l01152"></a>01152         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      context_key (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_context_key; }
<a name="l01153"></a>01153         <span class="keywordtype">void</span>        set_context_key (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter;
<a name="l01155"></a>01155         <a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a>      last_key (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ 
<a name="l01156"></a>01156             <span class="keywordflow">if</span>( m_last_keys_used == 1 ) 
<a name="l01157"></a>01157                 <span class="keywordflow">return</span> m_last_keys[0];
<a name="l01158"></a>01158             <span class="keywordflow">else</span> 
<a name="l01159"></a>01159                 <span class="keywordflow">return</span> -1; 
<a name="l01160"></a>01160         } 
<a name="l01161"></a>01161 
<a name="l01162"></a>01162         <span class="comment">// keep track of visited segments (for things like include)</span>
<a name="l01163"></a>01163         <span class="keywordtype">void</span>        remember_item (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) alter;
<a name="l01164"></a>01164         <span class="keywordtype">bool</span>        find_item (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key) <span class="keyword">const</span>;
<a name="l01165"></a>01165 
<a name="l01167"></a>01167         <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> alter *  opcode_handler (<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_objects[index]; }
<a name="l01168"></a>01168 
<a name="l01169"></a>01169         <span class="keywordtype">void</span>        adjust_written (<span class="keywordtype">int</span> count) alter    { m_objects_written += count; }
<a name="l01170"></a>01170 
<a name="l01171"></a>01171         <span class="keywordtype">int</span>         pass (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_pass; }
<a name="l01172"></a>01172 
<a name="l01174"></a>01174         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   revisit (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> opcode, <span class="keywordtype">float</span> priority, <span class="keywordtype">int</span> lod=0) alter;
<a name="l01175"></a>01175 
<a name="l01177"></a>01177         <span class="keywordtype">void</span>        record_instance (<a class="code" href="_b_stream_8h.html#86eab7c261b80c4a78c4f031afe36eb5">ID_Key</a> key, <span class="keywordtype">int</span> variant, <a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> const * <a class="code" href="jmemsys_8h.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a>,
<a name="l01178"></a>01178                                      <span class="keywordtype">int</span> val1, <span class="keywordtype">int</span> val2 = 0, <span class="keywordtype">int</span> val3 = 0) alter;
<a name="l01179"></a>01179 
<a name="l01181"></a>01181         <span class="keywordtype">bool</span>        find_instance (<a class="code" href="class_b_base_opcode_handler.html">BBaseOpcodeHandler</a> * object, <span class="keywordtype">int</span> val1, <span class="keywordtype">int</span> val2 = 0, <span class="keywordtype">int</span> val3 = 0) const;
<a name="l01182"></a>01182 
<a name="l01184"></a>01184         <span class="keywordtype">int</span>         position (<span class="keywordtype">void</span>)<span class="keyword"> const           </span>{ <span class="keywordflow">return</span> m_position; }
<a name="l01185"></a>01185         <span class="keywordtype">void</span>        set_position (<span class="keywordtype">int</span> pos) alter    { m_position = pos; }
<a name="l01186"></a>01186         <span class="keywordtype">void</span>        mark_position (<span class="keywordtype">void</span>) alter      { set_position (GeneratedSoFar()); }
<a name="l01187"></a>01187 
<a name="l01192"></a>01192         <span class="keyword">virtual</span> <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   tag (<span class="keywordtype">int</span> variant) alter;
<a name="l01193"></a>01193 
<a name="l01194"></a>01194         <span class="keywordtype">void</span>        increase_nesting (<span class="keywordtype">int</span> amount = 1) alter { m_nesting_level += amount; }
<a name="l01195"></a>01195         <span class="keywordtype">void</span>        decrease_nesting (<span class="keywordtype">int</span> amount = 1) alter { m_nesting_level -= amount; }
<a name="l01196"></a>01196 
<a name="l01197"></a>01197         <span class="comment">// utility</span>
<a name="l01198"></a>01198         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   start_compression (<span class="keywordtype">void</span>) alter      { <span class="keywordflow">return</span> m_accumulator.start_compression(); }
<a name="l01199"></a>01199         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   stop_compression (<span class="keywordtype">void</span>) alter       { <span class="keywordflow">return</span> m_accumulator.stop_compression(<span class="keyword">true</span>); }
<a name="l01200"></a>01200         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   start_decompression (<span class="keywordtype">void</span>) alter                { <span class="keywordflow">return</span> m_accumulator.start_decompression(); }
<a name="l01201"></a>01201         <a class="code" href="_b_stream_8h.html#7fc5467304bde11e03db7b69b29f2096">TK_Status</a>   stop_decompression (<span class="keywordtype">bool</span> force = <span class="keyword">false</span>) alter   { <span class="keywordflow">return</span> m_accumulator.stop_decompression(force); }
<a name="l01202"></a>01202         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    empty_lists (<span class="keywordtype">void</span>) alter;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204 #endif <span class="comment">/* DOXYGEN_SHOULD_SKIP_THIS */</span>
<a name="l01205"></a>01205 
<a name="l01206"></a>01206 };
<a name="l01207"></a>01207 
<a name="l01208"></a>01208 <span class="comment">//TODO Documentation </span>
<a name="l01209"></a>01209 
<a name="l01210"></a>01210 #ifndef BSTREAM_DISABLE_ASCII
<a name="l01211"></a><a class="code" href="class_put_tab.html">01211</a> class <a class="code" href="class_put_tab.html">PutTab</a>
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213 <span class="keyword">public</span>:
<a name="l01214"></a><a class="code" href="class_put_tab.html#b105ce33382a1645e3b70e816b1a7ba7">01214</a>         PutTab(<a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a>* tk) : m_tk(tk)
<a name="l01215"></a>01215         {
<a name="l01216"></a>01216                 <span class="keywordtype">int</span> n_tabs = m_tk-&gt;GetTabs();
<a name="l01217"></a>01217                 m_tk-&gt;SetTabs(++n_tabs);
<a name="l01218"></a>01218         }
<a name="l01219"></a>01219 
<a name="l01220"></a><a class="code" href="class_put_tab.html#2cc8147655ac848829404ad48b06180c">01220</a>         ~PutTab()
<a name="l01221"></a>01221         {
<a name="l01222"></a>01222                 <span class="keywordtype">int</span> n_tabs = m_tk-&gt;GetTabs();
<a name="l01223"></a>01223                 m_tk-&gt;SetTabs(--n_tabs);
<a name="l01224"></a>01224         }
<a name="l01225"></a>01225 
<a name="l01226"></a>01226 <span class="keyword">private</span>:
<a name="l01227"></a>01227         <a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a>* m_tk;
<a name="l01228"></a>01228 };
<a name="l01229"></a><a class="code" href="class_outdent.html">01229</a> <span class="keyword">class </span><a class="code" href="class_outdent.html">Outdent</a>
<a name="l01230"></a>01230 {
<a name="l01231"></a>01231 <span class="keyword">public</span>:
<a name="l01232"></a><a class="code" href="class_outdent.html#90c5123c74fbebc2aa4e682b576e5fe3">01232</a>         <a class="code" href="class_outdent.html">Outdent</a>(<a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a>* tk, <span class="keywordtype">int</span> n_tabs = 1) : m_tk(tk)
<a name="l01233"></a>01233         {
<a name="l01234"></a>01234                 <span class="keywordtype">int</span> cur_tabs = m_tk-&gt;GetTabs();
<a name="l01235"></a>01235                 <span class="keywordflow">if</span>( cur_tabs &gt;= n_tabs )
<a name="l01236"></a>01236                 {
<a name="l01237"></a>01237                         m_tabs = n_tabs;
<a name="l01238"></a>01238                         m_tk-&gt;SetTabs(cur_tabs-n_tabs);
<a name="l01239"></a>01239                 }
<a name="l01240"></a>01240                 <span class="keywordflow">else</span>
<a name="l01241"></a>01241                 {
<a name="l01242"></a>01242                         m_tabs = cur_tabs;
<a name="l01243"></a>01243                         m_tk-&gt;SetTabs(0);
<a name="l01244"></a>01244                 }
<a name="l01245"></a>01245         }
<a name="l01246"></a>01246 
<a name="l01247"></a><a class="code" href="class_outdent.html#2052a541558ff4f595e2322441fda5c4">01247</a>         ~<a class="code" href="class_outdent.html">Outdent</a>()
<a name="l01248"></a>01248         {
<a name="l01249"></a>01249                 <span class="keywordtype">int</span> cur_tabs = m_tk-&gt;GetTabs();
<a name="l01250"></a>01250                 m_tk-&gt;SetTabs(cur_tabs+m_tabs);
<a name="l01251"></a>01251         }
<a name="l01252"></a>01252 
<a name="l01253"></a>01253 <span class="keyword">private</span>:
<a name="l01254"></a>01254         <a class="code" href="class_b_stream_file_toolkit.html">BStreamFileToolkit</a>* m_tk;
<a name="l01255"></a>01255         <span class="keywordtype">int</span>                                     m_tabs;
<a name="l01256"></a>01256 };
<a name="l01257"></a>01257 
<a name="l01258"></a>01258 <span class="preprocessor">#endif //BSTREAM_DISABLE_ASCII</span>
<a name="l01259"></a>01259 <span class="preprocessor"></span>
<a name="l01260"></a>01260 <span class="preprocessor">#endif //BBINFILETK_TOOLKIT</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 6 22:41:37 2009 for Autodesk DWF 3D Toolkit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
